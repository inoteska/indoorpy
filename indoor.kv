#: import smn kivy.uix.screenmanager
#: import math math

<Indoor>:
    lblBasic: txtBasicLabel
    door1buton: btnDoor1
    door2buton: btnDoor2
    videoLabel1: videoLabel1
    videoLabel2: videoLabel2
    videoLabel3: videoLabel3
    videoLabel4: videoLabel4
    btnBox: btnBox

    ScreenManager:
        size_hint: 1, 1
        id: _screen_manager
        transition: smn.NoTransition() #FadeTransition()

        Screen:
            name: 'waitscr'
            on_enter: lblresult.text = 'Wait a moment...'

            ScatterLayout:
                do_rotation: False
                do_scale: False
                do_translation: False
                rotation: app.rotation
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                size_hint: None, None
                #size: root.height, root.width
                size: root.width, root.height

                BoxLayout:
                    orientation: 'vertical'

                    Label:
                        text: 'Information:'
                        font_size: self.height/5
                        color: 0.6,0.6,0.6,0.9
                    Label:
                        text: ''
                        id: lblresult
                        font_size: self.height/3
                        color: 0.9,0.9,0.9,0.9
                    Label:
                        text: ''
                        font_size: self.height/5
                        color: 0.6,0.6,0.6,0.9

        Screen:
            name: 'clock'
            on_touch_down: root.swap2camera()

            ScatterLayout:
                do_rotation: False
                do_scale: False
                do_translation: False
                rotation: app.rotation
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                size_hint: None, None
                #size: root.height, root.width
                size: root.width, root.height

                BoxLayout:
                    MyClockWidget:

        Screen:
            name: 'digiclock'
            on_touch_down: root.swap2camera()

            ScatterLayout:
                do_rotation: False
                do_scale: False
                do_translation: False
                rotation: app.rotation
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                size_hint: None, None
#                size: root.height, root.width
                size: root.width, root.height

                BoxLayout:
                    DigiClockWidget:

        Screen:
            name: 'camera'
            on_pre_enter: root.startScreenTiming()
            on_enter: root.enterCameraScreen()
            on_leave: root.finishScreenTiming()
            on_pre_leave: root.hidePlayers()

            ScatterLayout:
                id: scatter_layout
                do_rotation: False
                do_scale: False
                do_translation: False
                rotation: app.rotation
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                size_hint: None, None
##                size: root.height, root.width
#                size: root.width, root.height

                BoxLayout:
                    id: scattercameras
                    orientation: 'vertical'

        Screen:
            name: 'camera_o'
            on_pre_enter: root.startScreenTiming()
            on_enter: root.enterCameraScreen()
            on_leave: root.finishScreenTiming()
            on_pre_leave: root.hidePlayers()

            BoxLayout:
                id: workarea
                orientation: 'horizontal'
                size_hint: 1,.9
                pos: 0, 48
                spacing: 0

                BoxLayout:
                    id: cameras
                    orientation: 'vertical'
                    spacing: 0

                    BoxLayout:
                        id: cameras1
                        orientation: 'horizontal'

                        VideoLabel:
                            id: videoLabel1
                        VideoLabel:
                            id: videoLabel2

                    BoxLayout:
                        id: cameras2
                        orientation: 'horizontal'

                        VideoLabel:
                            id: videoLabel3
                        VideoLabel:
                            id: videoLabel4

            Label:
                id: txtBasicLabel
                text: 'Wait...'
                height: '44dp'
                font_size: '40dp'
                pos: 0, 52
                halign: 'center'
                size_hint_y: None

            BoxLayout:
                orientation: 'horizontal'
                size_hint_y: None
                height: '47dp'
                size: self.size
                id: btnBox

                ImageButton:
                    id: btnDoor1
                    imgpath: 'imgs/lock.png'
                    size_hint: None, 1
                    width: '176dp'
                    on_press: root.callback_btn_door1()
                ImageButton:
                    id: btnDoCall
                    imgpath: 'imgs/phone-call.png'
                    on_press: root.callback_btn_docall()
                ImageButton:
                    id: btnDoor2
                    imgpath: 'imgs/lock.png'
                    size_hint: None, 1
                    width: '176dp'
                    on_press: root.callback_btn_door2()

        SetScreen:
            name: 'settings'
            id: settings


# wait for video label:

<VideoLabel@Label>:
    text: 'Wait...'
    font_size: self.height/4
    color: 0.3,0.3,0.9,0.9
    bgcolor: 0,0,0
    canvas.before:
        Color:
            rgb: self.bgcolor
        Rectangle:
            size: self.size
            pos: self.pos


# image button:

<ImageButton>:
    imgpath: None
    AsyncImage:
        source: self.parent.imgpath
        center_x: self.parent.center_x
        center_y: self.parent.center_y


#CLOCK:

<DigiClockWidget>:
    DigiClock:
        font_size: self.height/4
        color: 0.3,0.6,0.9,0.9


[ClockNumber@Label]:
    text: str(ctx.i)
    pos_hint: {"center_x": 0.5+0.42*math.sin(math.pi/6*(ctx.i-12)), "center_y": 0.5+0.42*math.cos(math.pi/6*(ctx.i-12))}
    font_size: self.height/10
    color: 0,0,0.6,0.9


<MyClockWidget>:
    face: face
    ticks: ticks
    canvas:
        Color:
            rgba: 1,1,1,1
    FloatLayout:
        id: face
        size_hint: None, None
        pos_hint: {"center_x":0.5, "center_y":0.5}
        size: 0.9*min(root.size), 0.9*min(root.size)
    Ticks:
        id: ticks
        r: min(root.size)*0.9/2


# ListView label:

<MyListViewLabel>:
    font_size: 16
    halign: 'left'
    text_size: self.size


# Settings popup:

<SettingsPopupDlg>:
    closebutton: closebutton
    detailbutton: detailbutton
    size_hint: .8, .9
    orientation: 'vertical'
    valb: 100
    valv: 100
    valm: 100
    vald: False

    BoxLayout:
        orientation: 'horizontal'

        Label:
            text: 'Volume'
            size_hint_x: .6
        Slider:
            #id: valvolume
            min: 20
            max: 100
            step: 10
            value: root.valv
            on_value: root.valv = self.value

        Label:
            text: 'Mic'
            size_hint_x: .6
        Slider:
            #id: valmicvolume
            min: 20
            max: 100
            step: 10
            value: root.valm
            on_value: root.valm = self.value

    BoxLayout:
        orientation: 'horizontal'

        Label:
            text: 'Brightness'
            size_hint_x: .6
        Slider:
            #id: valbright
            min: 15
            max: 255
            step: 15
            value: root.valb
            on_value: root.valb = self.value

        Label:
            text: 'Do not disturb'
            size_hint_x: .6
        Switch:
            #id: valdnd
            active: root.vald
            on_active: root.vald = self.active

    BoxLayout:
        orientation: 'horizontal'
        size_hint_y: None
        height: '48dp'
        spacing: 8

        Button:
            id: detailbutton
            text: 'Detail'
            on_press: root.openDetailSettings()
        Image:
            source: 'imgs/nothing.png'
            size_hint: None, None
            size: '16px', '32px'
        Button:
            id: closebutton
            text: 'Close'
            on_press: root.closePopupSettings()


# Both side volume vertical sliders:

<SliderArea>:
    orientation: 'vertical'
    spacing: '8px'
#    size_hint: None, .9
#    width: '80px'
    imgpath: 'imgs/settings1.png'
    val: 100
    on_val: None
    audioslider: audioslider

    Slider:
        orientation: root.orientation #'vertical'
        id: audioslider
        min: 20
        max: 100
        step: 10
#        size_hint_y: .8
        value: root.val
        on_value: root.on_val()

    AsyncImage:
        source: root.imgpath
        size_hint: None, None
        size: '32px', '32px'
#        size_hint: 1, None
#        height: '32px'

    Image:
        source: 'imgs/nothing.png'
        size_hint: None, None
        size: '32px', '32px'

